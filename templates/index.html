{% extends "base.html" %}
{% block title %}–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞{% endblock %}

{% block content %}
    <h2>–î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥</h2>
    {% if success %}
        <p class="success">‚úÖ –£—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ!</p>
    {% endif %}
    {% if error %}
        <p class="error">‚ùå {{ error }}</p>
    {% endif %}

    <!-- –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤–≤–æ–¥–∞ -->
    <div style="background-color: #dfe6e9; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
        <strong>–ü—Ä–∏–º–µ—Ä:</strong> –í—ã –º–æ–∂–µ—Ç–µ –≤–≤–µ—Å—Ç–∏:
        <ul>
            <li><strong>–°—É–º–º–∞:</strong> 249</li>
            <li><strong>–í–∞–ª—é—Ç–∞:</strong> USD</li>
            <li><strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong> Travel</li>
            <li><strong>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</strong> admin</li>
        </ul>
    </div>

    <form action="/add_expense" method="post">
        <label>–°—É–º–º–∞:
            <input type="number" step="0.01" name="amount" required value="{{ amount or '' }}">
        </label>

        <label>–í–∞–ª—é—Ç–∞:
            <input type="text" name="currency" placeholder="USD/EUR/RUB" required value="{{ currency or '' }}">
        </label>

        <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:
            <input type="text" name="category" required value="{{ category or '' }}">
        </label>

        <label>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:
            <input type="text" name="user" required value="{{ user or '' }}">
        </label>

        <button type="submit">–î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥</button>
    </form>

    <h2>üìä –í—Å–µ —Ä–∞—Å—Ö–æ–¥—ã</h2>
    {% if expenses %}
        <table>
            <thead>
            <tr>
                <th>ID</th>
                <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                <th>–°—É–º–º–∞</th>
                <th>–í–∞–ª—é—Ç–∞</th>
                <th>–í USD</th>
                <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                <th>–î–∞—Ç–∞</th>
            </tr>
            </thead>
            <tbody>
            {% for expense in expenses %}
                <tr>
                    <td>{{ expense.id }}</td>
                    <td>{{ expense.user }}</td>
                    <td>{{ expense.amount }}</td>
                    <td>{{ expense.currency }}</td>
                    <td>{{ '%0.2f'|format(expense.converted_amount) }}</td>
                    <td>{{ expense.category }}</td>
                    <td>{{ expense.timestamp.strftime('%Y-%m-%d %H:%M') }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π.</p>
    {% endif %}
{% endblock %}